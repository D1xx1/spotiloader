{% extends "base.html" %}
{% block content %}
<div class="card">
    <form method="get" action=".">
        <div class="row" style="gap:10px;">
            {{ form.q }}
            <button class="btn" type="submit">–ò—Å–∫–∞—Ç—å</button>
        </div>
    </form>
    {% if error %}
        <div class="error" style="margin-top:12px;">–û—à–∏–±–∫–∞ –∑–∞–ø—Ä–æ—Å–∞: {{ error }}</div>
    {% endif %}
    
    {% if not query %}
    <!-- –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–æ –ø–æ–∏—Å–∫–∞ -->
    <div class="project-description" style="margin-top:20px; text-align:center; padding:20px;">
        <div style="font-size:48px; margin-bottom:16px;">üéµ</div>
        <h2 style="margin:0 0 12px 0; color:var(--ink); font-size:24px;">MusicFinder</h2>
        <p style="margin:0 0 16px 0; color:var(--muted); font-size:16px; line-height:1.5;">
            –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –ø–æ–∏—Å–∫–∞ –∏ —Å–∫–∞—á–∏–≤–∞–Ω–∏—è –º—É–∑—ã–∫–∏<br>
            –≤ —Ñ–æ—Ä–º–∞—Ç–µ MP3
        </p>
        <div style="display:flex; justify-content:center; gap:20px; flex-wrap:wrap; margin-top:20px;">
            <div style="text-align:center;">
                <div style="font-size:24px; margin-bottom:8px;">üîç</div>
                <div style="font-size:14px; color:var(--muted);">–£–º–Ω—ã–π –ø–æ–∏—Å–∫</div>
            </div>
            <div style="text-align:center;">
                <div style="font-size:24px; margin-bottom:8px;">üéß</div>
                <div style="font-size:14px; color:var(--muted);">–ü—Ä–µ–≤—å—é —Ç—Ä–µ–∫–æ–≤</div>
            </div>
            <div style="text-align:center;">
                <div style="font-size:24px; margin-bottom:8px;">üì•</div>
                <div style="font-size:14px; color:var(--muted);">–°–∫–∞—á–∏–≤–∞–Ω–∏–µ MP3</div>
            </div>
        </div>
        <div style="margin-top:24px; padding:12px 20px; background:linear-gradient(135deg, #1a2f4a 0%, #0f1f3a 100%); border-radius:12px; border:1px solid #2a3355;">
            <p style="margin:0; color:var(--muted); font-size:14px;">
                üí° <strong>–°–æ–≤–µ—Ç:</strong> –í—Å—Ç–∞–≤—å—Ç–µ —Å—Å—ã–ª–∫—É Spotify –∏–ª–∏ –≤–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —Ç—Ä–µ–∫–∞
            </p>
        </div>
    </div>
    {% else %}
        <p class="muted" style="margin-top:12px;">–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞ –¥–ª—è: <strong>{{ query }}</strong></p>
    {% endif %}
</div>

{% if results %}
<div class="card" style="margin-top:14px;">
    <table class="table">
        <thead>
            <tr>
                <th>–û–±–ª–æ–∂–∫–∞</th>
                <th>–¢—Ä–µ–∫</th>
                <th>–ê—Ä—Ç–∏—Å—Ç(—ã)</th>
                <th>–ê–ª—å–±–æ–º</th>
                <th>–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å</th>
                <th></th>
            </tr>
        </thead>
        <tbody>
        {% for t in results %}
            <tr>
                <td><img class="thumb" src="{{ t.image }}" alt=""></td>
                <td><a href="{{ t.external_url }}" target="_blank" rel="noopener">{{ t.name }}</a></td>
                <td>{{ t.artists }}</td>
                <td>{{ t.album }}</td>
                <td>{{ t.duration_str }}</td>
                <td><a class="pill" href="{% url 'track_detail' t.id %}">–ü–µ—Ä–µ–π—Ç–∏</a></td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
</div>
{% elif query %}
    <p class="muted" style="margin-top:12px;">–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ.</p>
{% endif %}
{% endblock %}
